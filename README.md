# Инструкции к заданиям
## Задание 1
### Инструкции по запуску
1. Данные необходимо скопировать в папку проекта, в папки "анкеты" и "контракты", чтобы получился путь `<папка проекта>/анкеты/A10003.xlsx`
2. Создать пользователя и БД в MySQL:
	- Открыть MySQL Command Line Client
	- Создать нового пользователя: `CREATE USER my_db_user;`
	- Создать новую БД: `CREATE DATABASE my_db;`
	- Предоставить пользователю привилегии на БД: `GRANT ALL PRIVILEGES ON my_db.* TO my_db_user;`
	- Обновить привилегии: `FLUSH PRIVILEGES;`
3. Установить необходимые python пакеты:

	3.1 Установка через командную строку:
	
	- Открыть командную строку
	- Перейти в папку с проектом
	- Запустить команду `pip install -r requirements.txt`
		
	3.2 Установка через Anaconda:
	
	- Запустить Anaconda Navigator
	- Перейти на вкладку "Environments"
	- В поле "Search Packages" вбить и установить поочередно пакеты `mysql-connector`, `openpyxl`, `pandas`
		
4. Запустить сам скрипт:
	- Открыть командную строку
	- Перейти в папку с проектом
	- Запустить `python task1.py`

### Ожидаемые результаты:
 - Создан пользователь "my_db_user"
 - Создана база данных "my_db"
 - Скрипт "task1.py" отработал без ошибок
 - Созданы таблицы "applications", "contracts", "education_dict", "employed_by_dict", "housing_dict", "income_type_dict", "marital_status_dict", "position_dict", "type_dict" в БД "my_db"
 - Таблица "applications" содержит 64 строки, в категориальных переменных ("employed_by", "education", "marital_status", "position", "income_type", "housing") находятся id записей, а не текстовые значения
 - Таблица "contracts" содержит 60 строк, в категориальной переменной "type" находятся id записей, а не текстовые значения
 - Таблицы "*_dict" содержат пары значений "id:value" - закодированные категориальные переменные
 
 ### Краткое описание скрипта:
 Скрипт `task1.py` создает таблицы в базе данных "my_db", загружает в них данные из Excel файлов, проверяет загруженные данные на логические ошибки и исправляет их, а также кодирует категориальные переменные числами, создавая при этом словари в БД для расшифровки.

---

## Задание 2
### Инструкции по запуску (предварительно см. задание 1)
1. Поместить файл payments.xls в папку проекта
2. Перенести скрипт `task2.py` и `task2.ipynb` в папку проекта
3. Запустить скрипт

	3.1 Открыть и запустить `task2.ipynb` через Jupyter
	
	3.2 Запустить скрипт `task2.py` через командную строку:
	
	- Открыть командную строку
	- Перейти в папку с проектом
	- Запустить `python task2.py`

### Ожидаемые результаты:
 - К созданной ранее БД добавлена третья таблица – платежи по контрактам, связанная с другими таблицами
 - Скрипт отработал без ошибок
 - Найдены моменты просрочки по правилу 90+ для каждого контракта и оформлены в таблицу
 - По выбранному пользователем горизонту риска строится таблица заемщиков с кредитами, срок которых меньше заданного горизонта, с флагом `дефолт/не дефолт` на выбранном горизонте с момента выдачи кредита
 - По выбранной пользователем характеристике из анкетных данных заемщика строятся показатели (таблица и картинка):
 	- WOE и IV, если переменная категориальная или квантилизированная
	- ВАЖНО: поскольку все переменные были квантилизированы или являются категориальными, НЕ строится ROC-кривая
 - В БД создана дополнительная таблица с информацией о моментах дефолтов
 
 ### Краткое описание скрипта:
 - Добавляет к БД таблицу платежей по контрактам
 - Запрашивает из БД таблицу платежей по контрактам и находит по ней моменты просрочки 90+ для каждого контракта
 - Позволяет пользователю задать горизонт риска и строит таблицу заемщиков на выбранном горизонте
 - Позволяет пользователю выбрать характеристику заемщика, по которой строятся показатели WOE и IV
 - Отправляет информацию о моментах дефолтов в БД в виде отдельной таблицы
